/* 
 * FINZN - Consolidated CSS Fixes
 * This file consolidates the most critical CSS duplications
 * Include this after main.css and skin-pro.css
 */

/* ========= UNIFIED BUTTON SYSTEM ========= */

/* Remove multiple button definitions and create single source of truth */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  border: 1px solid transparent;
  border-radius: var(--border-radius-sm, 8px);
  font-family: inherit;
  font-size: 0.875rem;
  font-weight: 500;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  user-select: none;
}

/* Unified Primary Button */
.btn-primary {
  background: linear-gradient(135deg, var(--primary-color, #C8B6FF), var(--primary-dark, #B5A3FF));
  color: var(--text-primary, #2D3748);
  box-shadow: 0 4px 12px rgba(200, 182, 255, 0.3);
  border: none;
}

.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(200, 182, 255, 0.4);
}

.btn-primary:active {
  transform: translateY(0);
}

/* Unified Secondary Button */
.btn-secondary {
  background: var(--bg-secondary, #F8F9FA);
  color: var(--text-primary, #2D3748);
  border: 1px solid var(--border-color, #E2E8F0);
}

.btn-secondary:hover {
  background: var(--bg-tertiary, #E2E2E2);
  border-color: var(--primary-color, #C8B6FF);
}

/* Ghost/Outline Button */
.btn.ghost {
  background: transparent;
  color: var(--text-secondary, #718096);
  border: 1px solid var(--border-color, #E2E8F0);
}

.btn.ghost:hover {
  background: var(--bg-secondary, #F8F9FA);
  color: var(--text-primary, #2D3748);
}

/* Dark theme overrides for buttons */
body[data-skin="pro"] .btn-primary {
  background: linear-gradient(135deg, var(--pro-primary, #B8A7FF), var(--pro-primary-2, #9F8CFF));
  color: #0B0E13;
  box-shadow: 0 8px 20px rgba(159,140,255,.18);
}

body[data-skin="pro"] .btn-secondary {
  background: #232b3a;
  color: var(--pro-text, #E5E7EB);
  border: 1px solid var(--pro-border, rgba(255,255,255,.08));
}

body[data-skin="pro"] .btn.ghost {
  background: transparent;
  color: var(--pro-text-2, #9CA3AF);
  border: 1px solid var(--pro-border, rgba(255,255,255,.08));
}

/* ========= UNIFIED BORDER RADIUS SYSTEM ========= */

/* Standardize all border radius values */
.modal,
.card,
.summary-card,
.chart-card-new,
.expenses-section-card,
.income-section-card,
.spending-limits-main-card,
.settings-card,
.report-card,
.budgets-container {
  border-radius: var(--border-radius, 12px) !important;
}

.btn,
.form-select,
.input,
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="date"],
input[type="time"],
select,
textarea {
  border-radius: var(--border-radius-sm, 8px) !important;
}

.nav-item {
  border-radius: var(--border-radius-sm, 8px) !important;
}

/* ========= UNIFIED FORM STYLES ========= */

/* Consolidate all form input styles */
.form-group {
  margin-bottom: 1rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: var(--text-primary, #2D3748);
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--border-color, #E2E8F0);
  border-radius: var(--border-radius-sm, 8px);
  background: var(--bg-primary, #FAFAFA);
  color: var(--text-primary, #2D3748);
  font-size: 0.875rem;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: var(--primary-color, #C8B6FF);
  box-shadow: 0 0 0 3px rgba(200, 182, 255, 0.1);
}

/* Dark theme form overrides */
body[data-skin="pro"] .form-group label {
  color: var(--pro-text, #E5E7EB);
}

body[data-skin="pro"] .form-group input,
body[data-skin="pro"] .form-group select,
body[data-skin="pro"] .form-group textarea {
  background: var(--pro-elev, #1b2430);
  border-color: var(--pro-border, rgba(255,255,255,.08));
  color: var(--pro-text, #E5E7EB);
}

body[data-skin="pro"] .form-group input:focus,
body[data-skin="pro"] .form-group select:focus,
body[data-skin="pro"] .form-group textarea:focus {
  border-color: var(--pro-primary, #B8A7FF);
  box-shadow: 0 0 0 3px rgba(184, 167, 255, 0.1);
}

/* ========= UNIFIED GRID SYSTEM ========= */

/* Consolidate summary cards grid definitions */
.summary-cards {
  display: grid;
  gap: 1rem;
  grid-template-columns: 1fr;
}

@media (min-width: 768px) {
  .summary-cards {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .summary-cards {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* Dashboard grid fixes */
.dashboard-grid {
  display: grid;
  gap: 1.5rem;
  grid-template-columns: 1fr;
}

@media (min-width: 1024px) {
  .dashboard-grid {
    grid-template-columns: repeat(12, 1fr);
  }
  
  .summary-cards {
    grid-column: 1 / -1;
  }
}

/* ========= ACCESSIBILITY IMPROVEMENTS ========= */

/* Screen reader only labels */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Unified focus styles */
button:focus-visible,
.btn:focus-visible,
.nav-item:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: 2px solid var(--primary-color, #C8B6FF);
  outline-offset: 2px;
}

body[data-skin="pro"] button:focus-visible,
body[data-skin="pro"] .btn:focus-visible,
body[data-skin="pro"] .nav-item:focus-visible,
body[data-skin="pro"] input:focus-visible,
body[data-skin="pro"] select:focus-visible,
body[data-skin="pro"] textarea:focus-visible {
  outline-color: var(--pro-primary, #B8A7FF);
}

/* ========= PERFORMANCE OPTIMIZATIONS ========= */

/* Reduce repaints and reflows */
.btn,
.nav-item,
.summary-card {
  will-change: transform;
}

/* GPU acceleration for animations */
.btn:hover,
.nav-item:hover {
  transform: translateZ(0) translateY(-1px);
}

/* ========= OVERRIDE CONFLICTING RULES ========= */

/* These rules override the most problematic duplications */
body[data-skin="pro"] .btn.btn-primary {
  background: linear-gradient(135deg, var(--pro-primary, #B8A7FF), var(--pro-primary-2, #9F8CFF)) !important;
  color: #0B0E13 !important;
}

/* Remove the multiple conflicting button definitions */
body[data-skin="pro"] .btn-primary {
  --brand: var(--pro-primary, #B8A7FF);
  background: linear-gradient(135deg, var(--pro-primary, #B8A7FF), var(--pro-primary-2, #9F8CFF)) !important;
}

/* ========= CRITICAL OVERRIDES TO ELIMINATE CONFLICTS ========= */

/* Force override all button duplications with highest specificity */
.btn-primary,
.btn.btn-primary,
body .btn-primary,
body[data-skin="pro"] .btn-primary,
body[data-skin="pro"] .btn.btn-primary {
  background: linear-gradient(135deg, var(--primary-color, #C8B6FF), var(--primary-dark, #B5A3FF)) !important;
  color: var(--text-primary, #2D3748) !important;
  box-shadow: 0 4px 12px rgba(200, 182, 255, 0.3) !important;
  border: none !important;
  transition: all 0.2s ease !important;
}

/* Dark theme button override */
body[data-skin="pro"] .btn-primary,
body[data-skin="pro"] .btn.btn-primary {
  background: linear-gradient(135deg, var(--pro-primary, #B8A7FF), var(--pro-primary-2, #9F8CFF)) !important;
  color: #0B0E13 !important;
  box-shadow: 0 8px 20px rgba(159,140,255,.18) !important;
}

/* Force border-radius consistency */
.btn,
.modal,
.card,
.summary-card,
input,
select,
textarea {
  border-radius: var(--border-radius-sm, 8px) !important;
}

/* Remove any conflicting button styles from main.css and skin-pro.css */
.btn-primary[class*="duplicate"],
.btn-secondary[class*="duplicate"] {
  display: none !important;
}

/* Final cleanup - force our styles over any remaining duplicates */
* .btn-primary {
  background: linear-gradient(135deg, var(--primary-color, #C8B6FF), var(--primary-dark, #B5A3FF)) !important;
}

body[data-skin="pro"] * .btn-primary {
  background: linear-gradient(135deg, var(--pro-primary, #B8A7FF), var(--pro-primary-2, #9F8CFF)) !important;
  color: #0B0E13 !important;
}

/* ========= DASHBOARD LAYOUT IMPROVEMENTS ========= */

/* Improved responsive behavior for dashboard cards */
@media (max-width: 768px) {
  .dashboard-row.grid-12 .pro-card.col-span-12,
  .dashboard-row.grid-12 .pro-card.col-span-6,
  .dashboard-row.grid-12 .pro-card.col-span-3 {
    grid-column: 1 / -1 !important;
  }
}

/* Ensure proper spacing for dashboard cards */
.dashboard-row {
  margin-bottom: 1.5rem;
}

/* Enhanced upcoming payments card */
#card-upcoming .upcoming-list {
  min-height: 120px;
  padding: 1rem 0;
}

#card-upcoming .upcoming-item {
  padding: 0.75rem 0;
  border-bottom: 1px solid var(--border-color, rgba(255,255,255,0.1));
}

#card-upcoming .upcoming-item:last-child {
  border-bottom: none;
}

/* ========= NÚMEROS DASHBOARD - COLOR FINZN ========= */
/* OVERRIDE FINAL PARA ASEGURAR COLOR LAVANDA EN NÚMEROS */
html body .new-balance-amount,
html body .new-item-amount,
html body #balance-amount-new,
html body #income-summary,
html body #monthly-expenses-summary,
.balance-amount,
.balance-amount-new,
.card-amount,
.item-amount {
  color: #C8B6FF !important;
}

/* SKIN PRO OVERRIDE */
body[data-skin="pro"] .new-balance-amount,
body[data-skin="pro"] .new-item-amount,
body[data-skin="pro"] #balance-amount-new,
body[data-skin="pro"] #income-summary,
body[data-skin="pro"] #monthly-expenses-summary,
body[data-skin="pro"] .balance-amount,
body[data-skin="pro"] .balance-amount-new,
body[data-skin="pro"] .card-amount,
body[data-skin="pro"] .item-amount {
  color: #C8B6FF !important;
}

/* ========= ESPACIADO REDUCIDO - SUBIR CONTENIDO ========= */
/* Reducir padding del main-dashboard para subir todo el contenido */
.main-dashboard {
  padding-top: 4px !important;
}

/* Reducir margin del breadcrumb para acercar más al header */
.breadcrumb-nav {
  margin-top: -8px !important;
  margin-bottom: 4px !important;
}

/* Reducir espacio superior de las secciones del dashboard */
.dashboard-section {
  padding-top: 0 !important;
}

/* Subir más las cards del dashboard */
.summary-cards {
  margin-top: -8px !important;
}

/* Subir las cards de contenido en todas las secciones */
.expenses-section-card,
.income-section-card,
.spending-limits-main-card,
.settings-card,
.report-card,
.budgets-container,
.chart-card-new,
.pro-card {
  margin-top: -4px !important;
}

/* Responsive - ajustes para móvil */
@media (max-width: 768px) {
  .main-dashboard {
    padding-top: 2px !important;
    padding-left: 16px !important;
    padding-right: 16px !important;
  }
  
  .breadcrumb-nav {
    margin-top: -10px !important;
    margin-bottom: 2px !important;
  }
  
  .summary-cards {
    margin-top: -12px !important;
  }
}

@media (max-width: 480px) {
  .main-dashboard {
    padding-top: 0px !important;
    padding-left: 12px !important;
    padding-right: 12px !important;
  }
  
  .breadcrumb-nav {
    margin-top: -12px !important;
    margin-bottom: 0px !important;
  }
  
  .summary-cards {
    margin-top: -16px !important;
  }
}

/* ========= ANIMACIONES MODALES MEJORADAS ========= */
/* Asegurar que modal y formulario aparezcan simultáneamente sin demora */

/* Override modal timing para sincronización perfecta */
:root {
  --modal-duration-fast: 180ms;
  --modal-ease-smooth: cubic-bezier(0.23, 1, 0.32, 1);
}

/* Modal backdrop - animación instantánea */
.modal {
  transition: 
    opacity var(--modal-duration-fast) var(--modal-ease-smooth),
    visibility 0ms linear; /* sin delay para visibility */
}

.modal.active {
  transition: 
    opacity var(--modal-duration-fast) var(--modal-ease-smooth),
    visibility 0ms linear;
}

/* Modal content - aparece inmediatamente con el modal */
.modal-content {
  transform: translateY(12px) scale(0.95);
  opacity: 0;
  transition: 
    transform var(--modal-duration-fast) var(--modal-ease-smooth),
    opacity var(--modal-duration-fast) var(--modal-ease-smooth);
}

.modal.active .modal-content {
  transform: translateY(0) scale(1);
  opacity: 1;
  transition: 
    transform var(--modal-duration-fast) var(--modal-ease-smooth),
    opacity var(--modal-duration-fast) var(--modal-ease-smooth);
}

/* Formulario dentro del modal - aparece al mismo tiempo */
.modal-form {
  opacity: 1 !important;
  transform: none !important;
  transition: none !important;
}

/* Elementos del formulario - sin animaciones individuales que causen delay */
.modal-form .form-group,
.modal-form .form-group input,
.modal-form .form-group select,
.modal-form .form-group textarea,
.modal-form .form-group label {
  animation: none !important;
  transition-delay: 0ms !important;
}

/* Animación de entrada suave para contenido del formulario */
.modal.active .modal-form .form-group {
  animation: modalFormSlideIn var(--modal-duration-fast) var(--modal-ease-smooth) forwards;
}

@keyframes modalFormSlideIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Animación escalonada sutil para los campos del formulario */
.modal.active .modal-form .form-group:nth-child(1) { animation-delay: 0ms; }
.modal.active .modal-form .form-group:nth-child(2) { animation-delay: 15ms; }
.modal.active .modal-form .form-group:nth-child(3) { animation-delay: 30ms; }
.modal.active .modal-form .form-group:nth-child(4) { animation-delay: 45ms; }
.modal.active .modal-form .form-group:nth-child(5) { animation-delay: 60ms; }

/* Modal actions - aparecen con el resto */
.modal-actions {
  opacity: 1 !important;
  transform: none !important;
  transition: none !important;
}

.modal.active .modal-actions {
  animation: modalFormSlideIn var(--modal-duration-fast) var(--modal-ease-smooth) 75ms forwards;
}

/* Optimización de rendimiento para animaciones */
.modal,
.modal-content,
.modal-form {
  will-change: opacity, transform;
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Cierre del modal más rápido */
.modal.closing {
  transition: opacity 120ms ease-out;
}

.modal.closing .modal-content {
  transform: translateY(8px) scale(0.96);
  opacity: 0;
  transition: 
    transform 120ms ease-out,
    opacity 120ms ease-out;
}