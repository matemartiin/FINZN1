/* ========= FINZN - Skin PRO (seguro) ========= */
/* Paleta oscura profesional compatible con tu look actual */

/* === Tokens base (fallbacks) === */
:root{
  --font-sans: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  --surface-1-pro: var(--surface-1, #0f1115);
  --border-subtle: rgba(255,255,255,0.08);
  --text-1: var(--text-color, #e7e9ee);
  --text-2: rgba(231,233,238,0.72);
  --brand: #8f7bff;
  --brand-2: #6d58ff;
  --space-3: .75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --elevation-2: 0 4px 10px rgba(0,0,0,.25);
  --elevation-4: 0 8px 20px rgba(0,0,0,.35);
  --elevation-6: 0 14px 28px rgba(0,0,0,.4);
}

html, body{ font-family: var(--font-sans); }

body[data-skin="pro"]{
  --pro-bg:        #10151c;
  --pro-surface:   #151c26;
  --pro-elev:      #1b2430;
  --pro-border:    rgba(255,255,255,.08);
  --pro-text:      #E5E7EB;
  --pro-text-2:    #9CA3AF;

  --pro-primary:   #B8A7FF;  /* lavanda FINZN */
  --pro-primary-2: #9F8CFF;

  --pro-success:   #22C55E;
  --pro-warning:   #F59E0B;
  --pro-error:     #EF4444;

  --pro-shadow-sm: 0 1px 2px rgba(0,0,0,.35);
  --pro-shadow-md: 0 6px 18px rgba(0,0,0,.35);
}

/* Header y contenedores elevables: NO cambiamos layout, solo estilo */
body[data-skin="pro"] .header{
  background: var(--pro-surface);
  box-shadow: var(--pro-shadow-sm);
}
body[data-skin="pro"] .main-dashboard,
body[data-skin="pro"] .dashboard-section.active{
  background: transparent;
  color: var(--pro-text);
}

/* Sidebar */
body[data-skin="pro"] .sidebar-nav{
  background: var(--pro-surface);
  border-right: 1px solid var(--pro-border);
}
body[data-skin="pro"] .nav-item.active{
  background: #232b3a;
  border: 1px solid var(--pro-border);
  box-shadow: var(--pro-shadow-sm);
}

/* Tarjetas (NO tocamos display ni grid) */
body[data-skin="pro"] .summary-card,
body[data-skin="pro"] .chart-card-new,
body[data-skin="pro"] .expenses-section-card,
body[data-skin="pro"] .income-section-card,
body[data-skin="pro"] .spending-limits-main-card,
body[data-skin="pro"] .settings-card,
body[data-skin="pro"] .report-card,
body[data-skin="pro"] .budgets-container {
  background: var(--pro-elev);
  border: 1px solid var(--pro-border);
  box-shadow: var(--pro-shadow-sm);
  color: var(--pro-text);
}

/* Tipografía y jerarquía: solo tamaños/colores, sin mover nada */
body[data-skin="pro"] .section-header h1 { 
  color: var(--pro-text); 
  font-size: clamp(1.25rem, 1rem + 1.5vw, 2rem);
}
body[data-skin="pro"] .card-amount{
  color: var(--pro-text);
  font-weight: 800;
}
body[data-skin="pro"] .card-title,
body[data-skin="pro"] .nav-label{
  color: var(--pro-text-2);
}

/* Botones: look FINZN pero más “pro” */
body[data-skin="pro"] .btn-primary{
  background: linear-gradient(135deg, var(--pro-primary), var(--pro-primary-2));
  color: #0B0E13;
  box-shadow: 0 8px 20px rgba(159,140,255,.18);
}
body[data-skin="pro"] .btn-secondary{
  background: #232b3a;
  color: var(--pro-text);
  border: 1px solid var(--pro-border);
}

/* Accesibilidad: foco visible en todo lo interactivo */
body[data-skin="pro"] a:focus-visible,
body[data-skin="pro"] button:focus-visible,
body[data-skin="pro"] .nav-item:focus-visible,
body[data-skin="pro"] .btn:focus-visible{
  outline: 3px solid color-mix(in oklab, var(--pro-primary), #000 10%);
  outline-offset: 2px;
  border-radius: 10px;
}

body[data-skin="pro"] .summary-card .card-amount{
  font-size: clamp(1.4rem, 1.2rem + 1vw, 2rem);
  letter-spacing: .2px;
}
body[data-skin="pro"] .summary-card .card-header-simple{ 
  padding-bottom: 6px; 
  border-bottom: 1px solid var(--pro-border);
}

@media (min-width: 1024px){
  body[data-skin="pro"] .summary-cards{
    display: grid !important;
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: 16px;
  }
}
@media (max-width: 1023px){
  body[data-skin="pro"] .summary-cards{
    display: grid !important;
    grid-template-columns: 1fr;
    gap: 12px;
  }
}

/***** PRO UI POLISH v2 — pegar al final de skin-pro.css *****/

/* 1) Escala tipográfica & espaciado base */
body[data-skin="pro"] {
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-7: 32px;
  --space-8: 40px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;

  --text-muted: rgba(255,255,255,.72);

  font-feature-settings: "cv01","cv02","ss01";
}

body[data-skin="pro"] .section-header h1 {
  font-size: clamp(20px, 2.2vw, 28px);
  line-height: 1.2;
  letter-spacing: .2px;
  margin: 0;
}

/* 2) Summary cards: altura, padding, jerarquía */
body[data-layout="v2"][data-skin="pro"] .summary-cards {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--space-6);
  margin-bottom: var(--space-7);
}

body[data-skin="pro"] .summary-card {
  padding: var(--space-6);
  border-radius: var(--radius-lg);
  min-height: 180px;
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  transition: transform .14s ease, box-shadow .14s ease;
}
body[data-skin="pro"] .summary-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 28px rgba(0,0,0,.28);
}
body[data-skin="pro"] .card-header-simple {
  display: flex; align-items: center; gap: var(--space-3);
}
body[data-skin="pro"] .card-title {
  font-weight: 700;
  letter-spacing: .2px;
}
body[data-skin="pro"] .card-amount {
  font-size: clamp(22px, 3vw, 32px);
  font-weight: 800;
  letter-spacing: .4px;
}

/* 3) Icon chips más prolijos */
body[data-skin="pro"] .icon-chip {
  display:inline-flex; align-items:center; justify-content:center;
  width: 36px; height: 36px; border-radius: 10px;
  background: linear-gradient(180deg, rgba(137,116,255,.22), rgba(137,116,255,.06));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
}
body[data-skin="pro"] .icon-chip .ph { font-size: 18px; }

/* 4) Botones: tamaño consistente y microinteracción */
body[data-skin="pro"] .btn {
  height: 40px; padding: 0 var(--space-4);
  border-radius: 12px; font-weight: 700; letter-spacing:.2px;
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}
body[data-skin="pro"] .btn:active { transform: translateY(1px) scale(.99); }
body[data-skin="pro"] .btn.btn-primary {
  box-shadow: 0 10px 22px rgba(137,116,255,.28);
}
body[data-skin="pro"] .btn.btn-primary:hover {
  box-shadow: 0 14px 28px rgba(137,116,255,.36);
}

/* 5) Sidebar: item activo con marcador lateral + foco accesible */
body[data-skin="pro"] .sidebar-nav { padding: 14px 8px; }
body[data-skin="pro"] .nav-item {
  border-radius: 10px; padding: 10px 12px; position: relative;
}
body[data-skin="pro"] .nav-item:focus-visible {
  outline: 2px solid rgba(137,116,255,.6);
  outline-offset: 2px;
}
body[data-skin="pro"] .nav-item.active {
  background: linear-gradient(180deg, rgba(137,116,255,.22), rgba(137,116,255,.06));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06), 0 8px 22px rgba(137,116,255,.18);
}
body[data-skin="pro"] .nav-item.active::before{
  content:""; position:absolute; left:-2px; top:8px; bottom:8px; width:4px;
  border-radius: 4px;
  background: linear-gradient(180deg, #8a74ff, #61dafb);
}
body[data-skin="pro"] .nav-icon .ph { font-size: 18px; }

/* Badges de nav más legibles */
body[data-skin="pro"] .nav-badge{
  margin-left:auto; min-width: 22px; height: 22px; padding: 0 6px;
  border-radius: 999px; display:inline-flex; align-items:center; justify-content:center;
  font-size: 12px; font-weight: 800; color: #0b1020;
  background: linear-gradient(180deg,#61dafb,#8a74ff);
  box-shadow: 0 6px 16px rgba(97,218,251,.35);
}


/* 7) Gráfico: alto fluido y marco */
body[data-skin="pro"] .chart-card-new{
  border-radius: var(--radius-lg);
  padding: var(--space-6);
}
body[data-skin="pro"] .chart-container-new{
  /* altura responsiva: 320–460 según ancho */
  height: clamp(320px, 46vw, 460px);
}
body[data-skin="pro"] .chart-card-new h3{
  display:flex; align-items:center; gap: var(--space-3);
  margin: 0 0 var(--space-4);
}

/* 8) Listas (gastos/ingresos): densidad y hover */
body[data-skin="pro"] .expenses-list .expense-item,
body[data-skin="pro"] .income-list .income-item{
  display:grid; grid-template-columns: 1fr auto auto; gap: var(--space-4);
  align-items:center; padding: 12px 14px; border-radius: 12px;
  background: rgba(255,255,255,.02);
  transition: background .12s ease, transform .12s ease;
}
body[data-skin="pro"] .expenses-list .expense-item + .expense-item,
body[data-skin="pro"] .income-list .income-item + .income-item{ margin-top: 8px; }
body[data-skin="pro"] .expenses-list .expense-item:hover,
body[data-skin="pro"] .income-list .income-item:hover{
  background: rgba(255,255,255,.04); transform: translateY(-1px);
}

/* 9) Section header - clean style without background */
body[data-skin="pro"] .section-content .section-header{
  position: static;
  padding: 0;
  background: transparent;
  backdrop-filter: none;
}

/* 10) Responsivo fino: SIEMPRE 3 columnas, solo ajustar gaps */
@media (max-width: 1200px){
  body[data-layout="v2"][data-skin="pro"] .summary-cards{
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: 12px;
  }
}
@media (max-width: 900px){
  body[data-layout="v2"][data-skin="pro"] .summary-cards{
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: 8px;
  }
}
@media (max-width: 480px){
  body[data-layout="v2"][data-skin="pro"] .summary-cards{
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: 4px;
  }
  body[data-skin="pro"] .btn { height: 44px; }
}

/* 11) Estados vacíos (por si una lista viene vacía) */
body[data-skin="pro"] .empty-state{
  display:flex; align-items:center; justify-content:center; text-align:center;
  padding: var(--space-7); border-radius: var(--radius-lg);
  color: var(--text-muted); background: rgba(255,255,255,.03);
  border: 1px dashed rgba(255,255,255,.08);
}

/* ==== PASO 3 SAFE — Tabs + estados vacíos (solo visual) ==== */

/* Contenedor de tabs */
.transaction-tabs{
  display:flex;
  gap:8px;
  padding:6px;
  border:1px solid rgba(255,255,255,.06);
  border-radius:12px;
  background:rgba(255,255,255,.03);
  margin-bottom:14px;
}

/* Botón de tab */
.transaction-tabs .tab-btn{
  appearance:none;
  border:1px solid transparent;
  padding:10px 14px;
  border-radius:10px;
  font-weight:600;
  opacity:.9;
  cursor:pointer;
  background:transparent;
  transition:all .18s ease;
  line-height:1;
}
.transaction-tabs .tab-btn:hover{
  opacity:1;
  background:rgba(255,255,255,.05);
}
.transaction-tabs .tab-btn.active{
  background:linear-gradient(180deg, rgba(137,116,255,.18), rgba(137,116,255,.06));
  border-color:rgba(137,116,255,.35);
  box-shadow:0 8px 20px rgba(137,116,255,.20);
}

/* Tarjetas dentro de cada tab (solo estilos, sin cambiar display) */
.transactions-container .expenses-section-card,
.transactions-container .income-section-card{
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px;
  padding:16px;
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
  box-shadow:0 10px 24px rgba(0,0,0,.18);
}

/* Estados vacíos (sin JS). 
   Muestra un mensaje cuando aún no hay datos en las listas */
#expenses-list:empty::before,
#income-list:empty::before,
#category-limits-display:empty::before{
  content:"Nada por aquí todavía. Usá los botones de arriba para empezar.";
  display:block;
  text-align:center;
  padding:28px 12px;
  opacity:.75;
  border:1px dashed rgba(255,255,255,.15);
  border-radius:12px;
  margin-top:8px;
  font-weight:500;
}

/* === PRO v2 · Sidebar/Nav === */
body[data-skin="pro"] .sidebar-nav{
  border-right: 1px solid var(--border-subtle);
}

body[data-skin="pro"] .nav-item{
  display:flex; align-items:center; gap:.75rem;
  padding: .625rem .9rem;
  border-radius: 10px;
  color: var(--text-2);
  transition: background .15s ease, color .15s ease, transform .15s ease;
}
body[data-skin="pro"] .nav-item .nav-icon{
  width: 1.25rem; display:grid; place-items:center;
  opacity:.9;
}
body[data-skin="pro"] .nav-item:hover{
  background: rgba(255,255,255,0.05);
  color: var(--text-1);
  transform: translateX(1px);
}
body[data-skin="pro"] .nav-item.active{
  color: var(--text-1);
  background: linear-gradient(90deg, rgba(143,123,255,.14), rgba(143,123,255,0));
  position: relative;
}
body[data-skin="pro"] .nav-item.active::before{
  content:"";
  position:absolute; left:-10px; top:8px; bottom:8px;
  width:3px; border-radius: 2px;
  background: linear-gradient(180deg, var(--brand), var(--brand-2));
  box-shadow: 0 0 10px rgba(143,123,255,.6);
}

/* Mobile bottom-nav coherente */
body[data-skin="pro"] .mobile-nav-item.active{
  color: var(--text-1);
}

/* === PRO v2 · Botones === */
body[data-skin="pro"] .btn{
  border-radius: 12px;
  padding: .625rem .9rem;
  font-weight: 600;
  letter-spacing: .2px;
  border: 1px solid var(--border-subtle);
  background: rgba(255,255,255,0.02);
  color: var(--text-1);
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;
}
body[data-skin="pro"] .btn:hover{
  transform: translateY(-1px);
  background: rgba(255,255,255,0.04);
  box-shadow: var(--elevation-2);
}
body[data-skin="pro"] .btn:active{
  transform: translateY(0);
  box-shadow: none;
}
body[data-skin="pro"] .btn:focus-visible{
  outline: 2px solid rgba(143,123,255,.6);
  outline-offset: 2px;
}

/* Principal */
body[data-skin="pro"] .btn.btn-primary{
  background: linear-gradient(180deg, var(--brand), var(--brand-2));
  border-color: transparent;
}
body[data-skin="pro"] .btn.btn-primary:hover{
  box-shadow: 0 8px 18px rgba(143,123,255,.35);
}

/* Ghost */
body[data-skin="pro"] .btn.ghost{
  background: transparent;
  border-color: var(--border-subtle);
  color: var(--text-2);
}
body[data-skin="pro"] .btn.ghost:hover{
  color: var(--text-1);
  border-color: rgba(255,255,255,.16);
}

/* === PRO v2 · Headers de tarjeta === */
body[data-skin="pro"] .card-header-simple{
  display:flex; align-items:center; justify-content: space-between;
  margin-bottom: .35rem;
}
body[data-skin="pro"] .card-title{
  display:flex; align-items:center; gap:.5rem;
  font-weight: 700;
}
body[data-skin="pro"] .card-icon-simple .icon-chip{
  display:inline-grid; place-items:center;
  width: 32px; height: 32px; border-radius: 10px;
  background: rgba(143,123,255,.12);
  color: #cbbfff;
  border: 1px solid rgba(143,123,255,.25);
}

/* === PRO v2 · Header de la card de gráfico === */
body[data-skin="pro"] .chart-card-head{
  display:flex; align-items:center; justify-content: space-between;
  gap: var(--space-4);
  margin-bottom: var(--space-4);
}
body[data-skin="pro"] .chart-card-head h3{
  display:flex; align-items:center; gap: var(--space-3);
  margin: 0;
  font-weight: 700;
  letter-spacing: .2px;
}
body[data-skin="pro"] .card-title-actions{
  display:flex; align-items:center; gap: .5rem;
}

/* ============ PRO v3 ============ */

/* 1) Contenedor y separación entre filas */
body[data-skin="pro"] .dashboard-section{
  max-width: 1180px;
  margin-inline: auto;
  padding-inline: clamp(16px, 3vw, 24px);
}
body[data-skin="pro"] .dashboard-grid{
  display:grid;
  row-gap: var(--space-7);
}

/* 2) Summary cards parejas (ya tenías V2, acá lo reforzamos) */
body[data-skin="pro"] .summary-cards{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--space-6);
  align-items: stretch;
}
@media (max-width: 1200px){
  body[data-skin="pro"] .summary-cards{ grid-template-columns: repeat(3, 1fr); gap: 12px; }
}
@media (max-width: 900px){
  body[data-skin="pro"] .summary-cards{ grid-template-columns: repeat(3, 1fr); gap: 8px; }
}
@media (max-width: 480px){
  body[data-skin="pro"] .summary-cards{ grid-template-columns: repeat(3, 1fr); gap: 4px; }
}
body[data-skin="pro"] .summary-card{
  height:100%;
  padding: var(--space-5);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  background: var(--surface-1-pro);
  position: relative;
  z-index: 0;
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
  will-change: transform;
}
@media (hover:hover){
  body[data-skin="pro"] .summary-card:hover{
    transform: translateY(-1px);
    box-shadow: 0 8px 20px rgba(20,20,40,.08);
    border-color: color-mix(in oklab, var(--border-subtle), transparent 25%);
  }
  body[data-skin="pro"] .chart-card-new:hover{
    transform: translateY(-1px);
    box-shadow: 0 8px 20px rgba(20,20,40,.08);
    border-color: color-mix(in oklab, var(--border-subtle), transparent 25%);
  }
}
@media (prefers-reduced-motion: reduce){
  body[data-skin="pro"] .summary-card,
  body[data-skin="pro"] .chart-card-new{ transition: none; }
}
body[data-skin="pro"] .summary-card .card-amount{
  font-weight:700;
  font-size: clamp(1.6rem, 2vw + .5rem, 2.2rem);
}

/* 3) Encabezados e icon-chips */
body[data-skin="pro"] .card-header-simple{
  display:flex; align-items:center; gap:var(--space-3);
  margin-bottom: var(--space-2);
}
body[data-skin="pro"] .card-title{ font-weight:600; letter-spacing:.2px; }
body[data-skin="pro"] .icon-chip{
  --chip-bg: color-mix(in oklab, #6B5BFF 12%, transparent);
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px; border-radius:10px;
  background: var(--chip-bg);
  border:1px solid var(--border-subtle);
}
body[data-skin="pro"] .icon-chip .ph{ font-size:18px; }

/* 4) Variantes sutiles para KPI */
body[data-skin="pro"] .balance-card-new{
  background: linear-gradient(180deg, rgba(107,91,255,.06), transparent);
}
body[data-skin="pro"] .income-card{
  background: linear-gradient(180deg, rgba(34,197,94,.08), transparent);
}
body[data-skin="pro"] .expenses-card{
  background: linear-gradient(180deg, rgba(244,63,94,.08), transparent);
}

/* 5) Chart card más pro y responsive */
body[data-skin="pro"] .chart-card-new{
  padding: var(--space-6);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  background: linear-gradient(180deg, rgba(143,123,255,.06), transparent);
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
body[data-skin="pro"] .chart-card-head{
  display:flex; align-items:center; justify-content:space-between;
  gap:var(--space-4); margin-bottom:var(--space-4);
}
body[data-skin="pro"] .chart-card-head h3{
  display:flex; align-items:center; gap:var(--space-3);
  margin:0; font-weight:700; letter-spacing:.2px;
}
body[data-skin="pro"] .card-title-actions{ display:flex; align-items:center; gap:.5rem; }
body[data-skin="pro"] .chart-content-with-mascot{
  display:grid; gap:var(--space-6);
  grid-template-columns: minmax(0,1fr) 220px;
  align-items:center;
}
@media (max-width: 900px){
  body[data-skin="pro"] .chart-content-with-mascot{
    grid-template-columns: 1fr;
  }
  body[data-skin="pro"] .chart-mascot{ order:2; }
}
body[data-skin="pro"] .chart-container-new{ min-height: 280px; }
body[data-skin="pro"] .chart-mascot-img{ max-width:160px; opacity:.9; }
@media (max-width: 900px){
  body[data-skin="pro"] .chart-mascot{ display:none; }
}

/* 6) Botones consistentes */
body[data-skin="pro"] .btn{
  border-radius: 12px;
  padding: .6rem .9rem;
  font-weight: 600;
  border: 1px solid var(--border-subtle);
  background: var(--surface-1-pro);
  transition: box-shadow .18s ease, transform .18s ease, background-color .18s ease;
}
body[data-skin="pro"] .btn.btn-primary{
  --brand: #6B5BFF;
  background: var(--brand);
  border-color: transparent;
  color: #fff;
}
body[data-skin="pro"] .btn.ghost{
  background: transparent;
}
@media (hover:hover){
  body[data-skin="pro"] .btn:hover{ box-shadow: 0 6px 14px rgba(107,91,255,.18); }
}

/* 7) Sidebar / navegación */
body[data-skin="pro"] .nav-item{
  display:flex; align-items:center; gap:.75rem;
  padding:.6rem .9rem;
  border-radius:.8rem;
  color: var(--text-muted, #6b7280);
}
body[data-skin="pro"] .nav-item .ph{ font-size:18px; }
body[data-skin="pro"] .nav-item.active{
  background: color-mix(in oklab, #6B5BFF 12%, transparent);
  color: var(--text-strong, #0f172a);
}

/* 8) Seguridad de visibilidad (no ocultar secciones por error) */
body[data-skin="pro"] .dashboard-section{ display:none; }
body[data-skin="pro"] .dashboard-section.active{ display:block; }

/* =========================
   PRO v3 — Dashboard Polish
   ========================= */

/* Tokens suaves para sombras/bordes */
:root {
  --pro3-radius: 14px;
  --pro3-gap: 18px;
  --pro3-stroke: rgba(255,255,255,.06);
  --pro3-stroke-strong: rgba(148, 120, 255, .28); /* acento violeta sutil */
  --pro3-glow: 0 10px 24px rgba(96, 165, 250, .08); /* luz fría */
  --pro3-surface: rgba(255,255,255,.02);
  --pro3-surface-strong: rgba(255,255,255,.04);
}

/* Grid general un poco más respirado */
.dashboard-grid { gap: var(--pro3-gap); }

/* Summary cards – borde + gradiente sutil + hover consistente */
.summary-card {
  position: relative;
  border: 1px solid var(--pro3-stroke);
  border-radius: var(--pro3-radius);
  background:
    linear-gradient(180deg, var(--pro3-surface), transparent 60%),
    var(--card-bg, rgba(255,255,255,.01));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.035);
  transition: transform .16s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
}

.summary-card:hover {
  transform: translateY(-1px);
  border-color: var(--pro3-stroke-strong);
  box-shadow: var(--pro3-glow);
  background:
    linear-gradient(180deg, var(--pro3-surface-strong), transparent 60%),
    var(--card-bg, rgba(255,255,255,.012));
}

/* Header simple de las cards: icon chip alineado + título */
.card-header-simple {
  display: flex; align-items: center; gap: 10px;
  padding: 14px 16px 4px 16px;
}

.card-header-simple .card-title {
  font-weight: 600;
  letter-spacing: .2px;
  opacity: .9;
}

/* Monto grande más legible y alineado */
.summary-card .card-amount {
  padding: 2px 16px 10px 16px;
  font-size: clamp(22px, 2.3vw, 28px);
  font-weight: 700;
  line-height: 1.1;
}

/* Botón dentro de la card separado del borde inferior */
.summary-card .card-action { padding: 0 16px 14px 16px; }

/* Balance con acento violeta fino (no neon) */
.balance-card-new { --card-bg: rgba(124, 58, 237, .05); }

/* Ingresos con acento verde suave */
.income-card     { --card-bg: rgba(34, 197, 94,  .05); }

/* Gastos con acento rojo suave */
.expenses-card   { --card-bg: rgba(239, 68, 68,  .05); }

/* Chips de ícono */
.icon-chip {
  display: inline-flex; align-items: center; justify-content: center;
  width: 28px; height: 28px; border-radius: 9px;
  background: rgba(255,255,255,.06);
  border: 1px solid var(--pro3-stroke);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}

/* --------- Chart card (gráfico) --------- */
.chart-section { margin-top: 8px; }
.chart-card-new {
  border: 1px solid var(--pro3-stroke);
  border-radius: var(--pro3-radius);
  background:
    linear-gradient(180deg, var(--pro3-surface), transparent 60%),
    var(--card-bg, rgba(255,255,255,.012));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.035);
  transition: box-shadow .18s ease, border-color .18s ease, background .18s ease;
}
.chart-card-new:hover {
  border-color: var(--pro3-stroke-strong);
  box-shadow: var(--pro3-glow);
}

.chart-card-new > h3 {
  display: flex; align-items: center; justify-content: space-between;
  gap: 12px;
  padding: 16px;
  font-size: 16px; font-weight: 600; letter-spacing: .2px;
  border-bottom: 1px dashed var(--pro3-stroke);
  margin: 0;
}
.chart-card-new > h3 i { opacity: .85; margin-right: 6px; }

/* Área del gráfico con “panel” suave */
.chart-content-with-mascot { padding: 12px 12px 16px 12px; }
.chart-container-new {
  border: 1px solid var(--pro3-stroke);
  border-radius: calc(var(--pro3-radius) - 4px);
  background:
    radial-gradient(1200px 300px at 50% 0%, rgba(148,163,184,.06), transparent 60%),
    linear-gradient(180deg, rgba(148,163,184,.05), rgba(148,163,184,.03));
  min-height: 280px;
  padding: 12px;
}

/* Botón secundario (por ej. “Ver reportes”) más discreto */
.btn.btn-secondary,
.chart-card-new .btn.btn-secondary {
  background: rgba(255,255,255,.06);
  border: 1px solid var(--pro3-stroke);
  color: rgba(255,255,255,.9);
}
.btn.btn-secondary:hover {
  background: rgba(255,255,255,.08);
  border-color: var(--pro3-stroke-strong);
}

/* Ajustes finos del botón primario para que combine con el polish */
.btn.btn-primary {
  box-shadow: 0 6px 18px rgba(124, 58, 237, .18);
  border: 1px solid rgba(124, 58, 237, .25);
}
.btn.btn-primary:hover {
  box-shadow: 0 8px 24px rgba(124, 58, 237, .24);
  transform: translateY(-1px);
}

/* Sidebar: un pelo más nítida la selección */
.sidebar .nav-item.active {
  background: linear-gradient(90deg, rgba(124, 58, 237, .15), transparent 70%);
  border: 1px solid rgba(124, 58, 237, .28);
}

/* ===== Dashboard Grid Utilities ===== */
body[data-skin="pro"] .grid-12 {
  display: grid;
  grid-template-columns: repeat(12, minmax(0, 1fr));
  gap: var(--space-6, 24px);
  margin-top: var(--space-6, 24px);
  align-items: stretch;
}
body[data-skin="pro"] .col-span-12 { grid-column: span 12; }
body[data-skin="pro"] .col-span-7  { grid-column: span 7; }
body[data-skin="pro"] .col-span-6  { grid-column: span 6; }
body[data-skin="pro"] .col-span-5  { grid-column: span 5; }

@media (max-width: 1200px) {
  body[data-skin="pro"] .col-span-7,
  body[data-skin="pro"] .col-span-6,
  body[data-skin="pro"] .col-span-5 { grid-column: span 12; }
}

/* Unificar mínimos por sección (fila 1 y fila 2 del dashboard) */
#card-budgets-vs-spend,
#card-recent,
#card-upcoming,
#card-goals { min-height: 260px; }

/* Pequeños ajustes internos para listas */
.tx-list, .upcoming-list, .goals-mini { margin-top: 4px; }


/* ===== Quick actions ===== */
body[data-skin="pro"] .quick-actions.pro {
  display: flex; flex-wrap: wrap; gap: var(--space-3, 12px);
  margin: var(--space-6, 24px) 0 var(--space-2,8px);
  justify-content: flex-end;
}
body[data-skin="pro"] .qa-btn {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 10px 14px;
  border-radius: var(--radius-full, 999px);
  background: linear-gradient(180deg, rgba(120,120,255,.13), rgba(120,120,255,.05));
  border: 1px solid rgba(153, 143, 255, .25);
  color: var(--text-primary, #E9EDF5);
  box-shadow: 0 1px 0 rgba(255,255,255,.04) inset, 0 12px 24px rgba(0,0,0,.18);
  transition: .2s ease;
}
body[data-skin="pro"] .qa-btn:hover {
  transform: translateY(-1px);
  border-color: rgba(153, 143, 255, .45);
  box-shadow: 0 2px 0 rgba(255,255,255,.06) inset, 0 16px 28px rgba(0,0,0,.22);
}

/* ===== PRO card ===== */
body[data-skin="pro"] .pro-card {
  background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  border: 1px solid rgba(180, 175, 255, .18);
  border-radius: var(--radius-2xl, 18px);
  padding: var(--space-4, 16px);
  box-shadow:
    0 0 0 1px rgba(120, 110, 255, .06) inset,
    0 10px 30px rgba(0,0,0,.22),
    0 2px 8px rgba(0,0,0,.12);
  min-height: 260px;
  display: flex; 
  flex-direction: column;
}
body[data-skin="pro"] .pro-card-head {
  display: flex; align-items: center; justify-content: space-between;
  gap: 12px; margin-bottom: 14px;
}
body[data-skin="pro"] .pro-card-head h3 {
  display: flex; align-items: center; gap: 10px;
  font-size: 15px; font-weight: 600; letter-spacing: .2px;
}

/* botón pequeño a la derecha del header */
body[data-skin="pro"] .btn-chip {
  font-size: 12.5px; padding: 6px 10px; border-radius: 10px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.18);
  color: var(--text-secondary, #C7D1E0);
  transition: .2s ease; white-space: nowrap;
}
body[data-skin="pro"] .btn-chip:hover { background: rgba(255,255,255,.1); }

/* ===== Budget bars ===== */
body[data-skin="pro"] .budget-bars { display: grid; gap: 12px; }
body[data-skin="pro"] .budget-bar {
  display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center;
}
body[data-skin="pro"] .budget-bar .meta {
  display: flex; gap: 10px; align-items: baseline;
  font-size: 13px;
}
body[data-skin="pro"] .budget-track {
  height: 10px; border-radius: 999px; overflow: hidden;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
}
body[data-skin="pro"] .budget-fill {
  height: 100%;
  background: linear-gradient(90deg, #7C6BFF, #9E8BFF);
  box-shadow: 0 0 0 1px rgba(0,0,0,.08) inset;
}

/* ===== Recent transactions ===== */
body[data-skin="pro"] .tx-list { display: grid; gap: 10px; }
body[data-skin="pro"] .tx-item {
  display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center;
  padding: 10px 12px; border-radius: 12px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.08);
}
body[data-skin="pro"] .tx-item .tx-meta { display: flex; gap: 8px; align-items: baseline; }
body[data-skin="pro"] .tx-item .tx-amount { font-variant-numeric: tabular-nums; font-weight: 600; }

/* ===== Próximos pagos ===== */
body[data-skin="pro"] .upcoming-list { display: grid; gap: 10px; }
body[data-skin="pro"] .upcoming-item {
  display: flex; justify-content: space-between; align-items: center; gap: 12px;
  padding: 10px 12px; border-radius: 12px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.08);
}

/* ===== Goals mini ===== */
body[data-skin="pro"] .goals-mini { display: grid; gap: 10px; }
body[data-skin="pro"] .goal-mini {
  padding: 10px 12px; border-radius: 12px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.08);
}
body[data-skin="pro"] .goal-track { margin-top: 8px; height: 8px; border-radius: 999px; background: rgba(255,255,255,.06); }
body[data-skin="pro"] .goal-fill { height: 100%; border-radius: inherit; background: linear-gradient(90deg, #3CCF91, #69E3B2); }

/* ===== Alerts ===== */
body[data-skin="pro"] .alerts { display: grid; gap: 10px; }
body[data-skin="pro"] .alert {
  padding: 10px 12px; border-radius: 12px;
  border: 1px solid rgba(255,255,255,.14);
  background: linear-gradient(180deg, rgba(255,83,112,.12), rgba(255,83,112,.06));
}

/* Ancho máximo más generoso para el contenido principal */
body[data-skin="pro"] .app-main,
body[data-skin="pro"] .main-content,
body[data-skin="pro"] .content-wrapper {
  max-width: 1400px; /* probá 1440px si tu monitor es ancho */
  margin-inline: auto;
  padding-inline: clamp(16px, 2vw, 28px);
}

/* si ya tenés .form-group con estilos, quizá no haga falta */
#expense-date {
  width: 100%;
  height: 40px;
  padding: 8px 12px;
  border-radius: 10px;
  border: 1px solid var(--border-muted, #e5e7eb);
  background: var(--surface, #fff);
}

/* Toolbar de acciones globales del dashboard */
.dashboard-actions{
  display:flex;
  gap:12px;
  justify-content:flex-end;
  flex-wrap:wrap;
  margin: 8px 0 16px;
}
@media (max-width: 900px){
  .dashboard-actions{ justify-content:flex-start; }
}

/* Cards: estructura segura para evitar que algo “salte” fuera */
.pro-card{
  display:flex;
  flex-direction:column;
  min-height:260px;
  overflow:hidden;            /* evita que botones/elementos sobresalgan */
}

/* Que cada fila de la grilla estire alturas de sus columnas */
.dashboard-row.grid-12{ align-items:stretch; }

/* Listas internas ocupan el alto disponible y scrollean si hace falta */
#card-budgets-vs-spend .budget-bars,
#card-recent .tx-list,
#card-upcoming .upcoming-list,
#card-goals .goals-mini{
  flex:1;
  min-height:0;
  overflow:auto;
}

/* === Fila en modo content-fit: las cards ajustan a su contenido
      sin que se superpongan entre sí ============================ */
.dashboard-row.grid-12.content-fit {
  align-items: start;
}

/* La card vuelve a "encerrar" su contenido para que nada se escape */
.dashboard-row.grid-12.content-fit .pro-card{
  position: relative;
  display: flex;
  flex-direction: column;
  min-height: auto;
  overflow: hidden;          /* <- clave, evita los solapes/“tubos” */
}

/* Listas internas: alto según contenido (scroll si se pasan) */
.dashboard-row.grid-12.content-fit #card-budgets-vs-spend .budget-bars,
.dashboard-row.grid-12.content-fit #card-recent .tx-list,
.dashboard-row.grid-12.content-fit #card-upcoming .upcoming-list,
.dashboard-row.grid-12.content-fit #card-goals .goals-mini,
.dashboard-row.grid-12.content-fit #card-insights .alerts{
  flex: 0 0 auto;    /* no rellenan toda la altura */
  min-height: 0;
  overflow: auto;    /* si hay mucho contenido, scrollean dentro de la card */
}

/* Ítems de listas seguros (sin alturas forzadas ni posicionamientos raros) */
.tx-list, .upcoming-list, .goals-mini, .alerts { display: grid; gap: 12px; }
.tx-item, .upcoming-item, .goal-mini, .alert {
  position: relative;
  height: auto;      /* si algún estilo anterior imponía height:100%, lo neutralizamos */
}

/* Goals mini with actions */
.goal-mini {
  padding: 12px;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 8px;
}

.goal-mini.empty-goal {
  text-align: center;
  padding: 20px;
}

.goal-mini.empty-goal .meta {
  margin-bottom: 12px;
  color: var(--text-muted);
}

.goal-header-mini {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 8px;
}

.goal-header-mini .meta {
  flex: 1;
  font-size: 13px;
  font-weight: 600;
}

.goal-actions-mini {
  display: flex;
  gap: 4px;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.goal-mini:hover .goal-actions-mini {
  opacity: 1;
}

.goal-actions-mini .btn {
  width: 24px;
  height: 24px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
}

.goal-actions-mini .btn i {
  font-size: 12px;
}

.goal-amount-mini {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 8px;
}

.goal-track {
  height: 4px;
  background: var(--background-secondary);
  border-radius: 2px;
  overflow: hidden;
}

.goal-fill {
  height: 100%;
  background: var(--primary-color);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.goal-mini.see-all {
  text-align: center;
  padding: 12px;
  background: var(--background-tertiary);
  border: 1px dashed var(--border-color);
}

/* Helpers de grilla que faltaban */
body[data-skin="pro"] .col-span-1 { grid-column: span 1; }
body[data-skin="pro"] .col-span-2 { grid-column: span 2; }
body[data-skin="pro"] .col-span-3 { grid-column: span 3; }
body[data-skin="pro"] .col-span-4 { grid-column: span 4; }

/* FILA 2 compacta y fiteada */
.dashboard-row.grid-12.content-fit { align-items: start; }
.dashboard-row.grid-12.content-fit .pro-card{
  min-height: auto;      /* la card solo crece lo necesario */
  overflow: hidden;      /* nada se sale */
}
.dashboard-row.grid-12.content-fit #card-upcoming .upcoming-list,
.dashboard-row.grid-12.content-fit #card-goals .goals-mini,
.dashboard-row.grid-12.content-fit #card-insights .alerts{
  max-height: clamp(180px, 30vh, 360px);  /* alto cómodo y responsivo */
  overflow: auto;                         /* si hay mucho contenido, scroll */
  padding-right: 4px;                     /* evita salto por scrollbar */
}
.dashboard-row.grid-12.content-fit .pro-card-head { margin-bottom: 8px; }

/* Responsive: en pantallas medias/chicas que se apilen limpias */
@media (max-width: 1200px){
  body[data-skin="pro"] .col-span-4 { grid-column: span 12; }
}

/* ===== Bottom navigation (móvil) ===== */
/* === NAVEGACIÓN MÓVIL OPTIMIZADA === */
.mobile-nav{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  display: flex;
  gap: 2px;
  padding: 10px 6px calc(12px + env(safe-area-inset-bottom));
  background: rgba(16,21,28,.92);
  backdrop-filter: blur(12px) saturate(180%);
  border-top: 1px solid rgba(184,167,255,.15);
  box-shadow: 0 -8px 32px rgba(0,0,0,.25);
  z-index: 1100;
}

.mobile-nav-item{
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 3px;
  padding: 10px 4px 8px;
  text-decoration: none;
  color: rgba(229,231,235,.65);
  border-radius: 12px;
  transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  position: relative;
  min-width: 0; /* Permite que flex funcione con 6 items */
}

.mobile-nav-item:hover {
  color: rgba(229,231,235,.85);
  background: rgba(255,255,255,.04);
  transform: translateY(-1px);
}

.mobile-nav-item.active {
  color: var(--pro-primary, #B8A7FF);
  background: rgba(184,167,255,.08);
  box-shadow: 0 0 0 1px rgba(184,167,255,.2), 
              0 2px 8px rgba(184,167,255,.15);
}

.mobile-nav-item.active::before {
  content: '';
  position: absolute;
  top: -2px;
  left: 50%;
  transform: translateX(-50%);
  width: 24px;
  height: 3px;
  background: linear-gradient(90deg, 
    rgba(184,167,255,.6) 0%, 
    rgba(184,167,255,1) 50%, 
    rgba(184,167,255,.6) 100%);
  border-radius: 2px;
  box-shadow: 0 0 8px rgba(184,167,255,.4);
}

.mobile-nav-icon {
  display: flex;
  align-items: center;
  justify-content: center;
}

.mobile-nav-icon .ph{ 
  font-size: 22px;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.3));
}

.mobile-nav-label{ 
  font-size: 11px; 
  font-weight: 600; 
  text-align: center;
  line-height: 1.2;
  letter-spacing: 0.02em;
  text-shadow: 0 1px 2px rgba(0,0,0,.4);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

/* Ocultar en desktop */
@media (min-width: 901px){
  .mobile-nav{ display: none; }
}

/* Dejar espacio abajo para que no la tape el contenido */
@media (max-width: 900px){
  .dashboard-section{ padding-bottom: calc(76px + env(safe-area-inset-bottom)); }
}

/* Evitar que el chat flote encima de la barra en móvil */
@media (max-width: 900px){
  #chat-widget{ bottom: 92px; } /* súbelo un poco */
}

/* ===== DASHBOARD — RESPONSIVE POLISH ===== */

/* Fila de 2 cards (Movimientos + Próximos) bien fiteada */
.dashboard-row.grid-12.content-fit { align-items: start; }
.dashboard-row.grid-12.content-fit .pro-card{
  min-height: auto;
  overflow: hidden;            /* evita solapes/“tubos” */
}
.dashboard-row.grid-12.content-fit #card-recent .tx-list,
.dashboard-row.grid-12.content-fit #card-upcoming .upcoming-list{
  max-height: clamp(200px, 32vh, 420px);
  overflow: auto;
  padding-right: 4px;          /* no salta por scrollbar */
}

/* T1: >=1200px (desktop grande) — 3 KPIs, fila 2 en 2 columnas */
@media (min-width: 1200px){
  body[data-skin="pro"] .summary-cards{
    grid-template-columns: repeat(3, minmax(0,1fr));
  }
}

/* T2: SIEMPRE mantener 3 columnas */
@media (max-width: 1199px) and (min-width: 901px){
  body[data-skin="pro"] .summary-cards{
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: 12px;
  }
}
@media (max-width: 900px) and (min-width: 481px){
  body[data-skin="pro"] .summary-cards{
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: 8px;
  }
  /* la fila de 2 cards se apila una debajo de la otra */
  body[data-skin="pro"] .col-span-6 { grid-column: span 12; }
  #card-budgets-vs-spend { min-height: 220px; }
  .pro-card { padding: 14px; border-radius: 14px; }
  .pro-card-head h3 { font-size: 15px; }
}

/* T3: <=900px (tablet) — MANTENER 3 columnas, contenidos más compactos */
@media (max-width: 900px){
  .dashboard-section{ padding-inline: 16px; }
  body[data-skin="pro"] .summary-cards{
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: 8px;
  }
  .summary-card{ min-height: 150px; padding: 14px; }
  .card-header-simple{ padding: 8px 8px 4px; }
  .summary-card .card-action{ padding: 0 8px 10px; }
  /* listas pueden crecer un poco más en móvil */
  .dashboard-row.grid-12.content-fit #card-recent .tx-list,
  .dashboard-row.grid-12.content-fit #card-upcoming .upcoming-list{
    max-height: 40vh;
  }
}

/* T4: <=480px (teléfono chico) — tipografías y botones */
@media (max-width: 480px){
  .summary-card .card-amount{ font-size: clamp(20px, 6vw, 28px); }
  .btn{ height: 44px; }
  .pro-card{ padding: 12px; border-radius: 12px; }
}

/* ===== Bottom-nav HARD FIX (mobile) ===== */
@media (max-width: 900px){
  /* 1) Siempre fija y por encima de todo */
  .mobile-nav{
    position: fixed !important;
    left: 0; right: 0; bottom: 0;
    z-index: 2147483000; /* muy alto */
  }

  /* 2) Evitar que algún contenedor la “encierre” o tape */
  html, body, #app, .main-dashboard{
    transform: none !important;
    filter: none !important;
    perspective: none !important;
  }
  .main-dashboard, .dashboard-section, .section-content{
    overflow: visible !important; /* que scrollee la página, no un div */
  }

  /* 3) Dejar espacio inferior en las secciones que usan .section-content */
  #transactions-section .section-content,
  #reports-section .section-content,
  #dashboard-section .section-content,
  #budgets-section .section-content,
  #goals-section .section-content,
  #calendar-section .section-content{
    padding-bottom: calc(76px + env(safe-area-inset-bottom));
  }

  /* 4) Chat arriba de la barra en móvil */
  #chat-widget{ bottom: 92px; }
}

/* ========= FIX MOBILE NAV + NO HORIZONTAL SCROLL ========= */

/* 0) Caja: evita desbordes por padding/gaps */
*, *::before, *::after { box-sizing: border-box; }

/* 1) Nunca permitir scroll lateral */
html, body {
  overflow-x: hidden !important;
  max-width: 100%;
}

/* 2) Asegurar que grids/containers no empujen el ancho */
.summary-cards,
.dashboard-grid,
.grid-12,
.dashboard-section {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}
.summary-cards > *, .grid-12 > * { min-width: 0; } /* evita que una card “rompa” el ancho */

/* 3) Bottom nav: siempre fija, por encima, y visible SOLO en móvil */
.mobile-nav{
  position: fixed !important;
  left: 0; right: 0; bottom: 0;
  display: none;              /* se muestra en mobile debajo */
  z-index: 2147483000;        /* por encima de todo */
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
}
@media (max-width: 900px){
  .mobile-nav{ display: flex; }

  /* LAYOUT MÓVIL CORREGIDO: Eliminar scroll global */
  html, body {
    height: 100%;
    overflow: hidden !important;
    margin: 0;
    padding: 0;
  }

  /* Aplicar 100dvh al contenedor principal */
  #layout-root,
  .dashboard-new {
    height: 100dvh !important;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* El main-dashboard debe ocupar el espacio restante */
  .main-dashboard {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 12px 16px calc(76px + env(safe-area-inset-bottom)) 16px;
    min-height: 0; /* Permite que flex funcione correctamente */
  }

  /* Asegurar que las secciones no generen scroll */
  .dashboard-section, .section-content {
    transform: none !important;
    perspective: none !important;
    filter: none !important;
    overflow-x: hidden !important;
  }
  
  /* === OPTIMIZACIÓN DE CARDS PARA MÓVIL === */
  .summary-cards {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
    margin-bottom: 16px;
  }

  .summary-card,
  .new-unified-card {
    min-height: 110px !important;
    padding: 16px !important;
    border-radius: 16px;
    box-shadow: 0 2px 12px rgba(0,0,0,.15);
  }

  .chart-card,
  .chart-card-new {
    min-height: 280px !important;
    padding: 18px !important;
    margin-bottom: 12px;
    border-radius: 18px;
  }

  .recent-transactions-card,
  .expenses-section-card {
    min-height: 320px !important;
    padding: 18px !important;
    border-radius: 18px;
  }

  /* === SCROLL INTERNO OPTIMIZADO === */
  .transactions-list,
  .expense-list {
    max-height: 260px;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 4px; /* Espacio para scrollbar */
  }

  /* Scrollbar personalizada para móvil */
  .transactions-list::-webkit-scrollbar,
  .expense-list::-webkit-scrollbar {
    width: 3px;
  }

  .transactions-list::-webkit-scrollbar-track,
  .expense-list::-webkit-scrollbar-track {
    background: rgba(255,255,255,.05);
    border-radius: 2px;
  }

  .transactions-list::-webkit-scrollbar-thumb,
  .expense-list::-webkit-scrollbar-thumb {
    background: rgba(184,167,255,.3);
    border-radius: 2px;
  }

  .transactions-list::-webkit-scrollbar-thumb:hover,
  .expense-list::-webkit-scrollbar-thumb:hover {
    background: rgba(184,167,255,.5);
  }

  /* Enhanced section responsive design */
  .dashboard-section {
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Eliminar cualquier padding fantasma que cause scroll */
  .dashboard-section.active {
    padding-bottom: 0 !important;
  }

  /* Grid del dashboard optimizado para móvil */
  .dashboard-grid {
    gap: 16px !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Asegurar que no haya márgenes problemáticos */
  .dashboard-grid > * {
    margin: 0 !important;
  }

  /* === TIPOGRAFÍA Y CONTRASTE MEJORADOS === */
  .summary-card .card-amount {
    font-size: clamp(1.5rem, 4vw, 2rem) !important;
    font-weight: 700 !important;
    color: var(--pro-text, #E5E7EB) !important;
    letter-spacing: -0.02em;
  }

  .summary-card .card-title,
  .chart-card .card-title {
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--pro-text, #E5E7EB) !important;
    margin-bottom: 8px;
  }

  .card-subtitle,
  .chart-subtitle {
    font-size: 12px !important;
    color: rgba(229,231,235,.7) !important;
    font-weight: 500;
  }

  /* Elementos de lista más legibles */
  .transaction-item,
  .expense-item {
    padding: 12px !important;
    margin-bottom: 2px;
    border-radius: 10px;
    background: rgba(255,255,255,.02);
  }

  .transaction-item:hover,
  .expense-item:hover {
    background: rgba(255,255,255,.04);
  }

  .transaction-description,
  .expense-description {
    font-size: 13px !important;
    font-weight: 600 !important;
    color: var(--pro-text, #E5E7EB) !important;
  }

  .transaction-amount,
  .expense-amount {
    font-size: 13px !important;
    font-weight: 700 !important;
  }

  .transaction-date,
  .expense-date {
    font-size: 11px !important;
    color: rgba(229,231,235,.6) !important;
    font-weight: 500;
  }

  /* === OPTIMIZACIONES DE PERFORMANCE === */
  
  /* Reducir animaciones en móvil para mejor performance */
  .summary-card,
  .chart-card,
  .transaction-item,
  .expense-item {
    transition: background-color 0.2s ease, transform 0.15s ease !important;
    will-change: auto; /* Solo activar will-change en hover */
  }

  .summary-card:hover,
  .chart-card:hover {
    will-change: transform, background-color;
    transform: translateY(-1px) !important;
    background-color: rgba(255,255,255,.03) !important;
  }

  /* Eliminar transforms costosos en elementos pequeños */
  .transaction-item:hover,
  .expense-item:hover {
    transform: none !important;
    background-color: rgba(255,255,255,.04) !important;
  }

  /* Optimizar backdrop-filter para móvil */
  .mobile-nav {
    backdrop-filter: blur(8px) !important; /* Reducir de 12px a 8px */
  }

  /* Reducir sombras costosas en móvil */
  .summary-card,
  .chart-card {
    box-shadow: 0 1px 8px rgba(0,0,0,.12) !important;
  }

  .summary-card:hover,
  .chart-card:hover {
    box-shadow: 0 2px 12px rgba(0,0,0,.15) !important;
  }

  /* === DETALLES FINALES Y CONSISTENCIA VISUAL === */
  
  /* Botones optimizados para móvil */
  .btn {
    min-height: 44px !important; /* Touch target mínimo */
    font-size: 14px !important;
    font-weight: 600 !important;
    padding: 12px 20px !important;
    border-radius: 12px !important;
  }

  .btn-primary {
    background: linear-gradient(135deg, var(--pro-primary), var(--pro-primary-2)) !important;
    box-shadow: 0 2px 8px rgba(184,167,255,.25) !important;
  }

  .btn-secondary {
    border: 1px solid rgba(255,255,255,.1) !important;
    background: rgba(255,255,255,.05) !important;
  }

  /* Input fields mejorados */
  input, select, textarea {
    min-height: 44px !important;
    font-size: 16px !important; /* Evita zoom en iOS */
    border-radius: 10px !important;
    padding: 12px 16px !important;
  }

  /* Modales optimizados para móvil */
  .modal-content {
    margin: 20px !important;
    border-radius: 20px !important;
    max-height: calc(100vh - 40px) !important;
    overflow-y: auto !important;
  }

  /* Chat widget posicionado correctamente */
  #chat-widget {
    bottom: calc(80px + env(safe-area-inset-bottom)) !important;
    right: 16px !important;
    z-index: 1050 !important;
  }

  /* Iconos de cards más prominentes */
  .card-icon,
  .icon-chip {
    width: 36px !important;
    height: 36px !important;
    border-radius: 10px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  .card-icon i,
  .icon-chip i {
    font-size: 18px !important;
  }

  /* Header mejorado para móvil */
  .header {
    padding: 12px 16px !important;
    backdrop-filter: blur(8px) !important;
  }

  .header h1 {
    font-size: 20px !important;
    font-weight: 700 !important;
  }
  
  .section-content {
    padding: var(--space-4);
    border-radius: var(--pro3-radius);
  }
  
  .section-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-3);
  }
  
  .section-actions {
    width: 100%;
    flex-wrap: wrap;
    gap: var(--space-2);
  }
  
  /* Better card layouts in mobile */
  .pro-card {
    margin-bottom: var(--space-4);
    width: 100%;
    box-sizing: border-box;
  }
  
  /* PRO MOBILE - All section cards */
  .expense-item,
  .goal-item,
  .budget-card,
  .report-card,
  .settings-card {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    padding: var(--space-3);
    border-radius: var(--pro3-radius);
  }
  
  /* PRO MOBILE - Action buttons */
  .budget-actions,
  .goal-actions,
  .expense-actions {
    flex-direction: row;
    flex-wrap: wrap;
    gap: var(--space-2);
    width: 100%;
  }
  
  .budget-actions .btn,
  .goal-actions .btn,
  .expense-actions .btn {
    flex: 1;
    min-width: calc(33.33% - var(--space-2));
    justify-content: center;
    font-size: 0.85rem;
    padding: var(--space-2);
  }
  
  /* PRO MOBILE - Lists */
  .goals-list,
  .budgets-list,
  .expenses-list,
  .reports-grid,
  .settings-categories {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-3);
    width: 100%;
  }
  
  /* PRO MOBILE - Calendar */
  .calendar-container {
    overflow-x: auto;
    margin: 0 -var(--space-3);
    padding: 0 var(--space-3);
  }
  
  /* PRO MOBILE - Forms and inputs */
  .form-group,
  .form-row {
    width: 100%;
    max-width: 100%;
  }

  /* Sidebar out, navegación móvil in */
  .sidebar-nav{ display: none !important; }

  /* Mantener 3 columnas incluso en móvil */
  body[data-skin="pro"] .summary-cards{ grid-template-columns: repeat(3, minmax(0,1fr)) !important; gap: 4px !important; }
  body[data-skin="pro"] .grid-12{ grid-template-columns: 1fr !important; }
  /* cualquier .col-span-* ocupa el ancho completo en mobile */
  body[data-skin="pro"] .grid-12 > [class*="col-span-"]{ grid-column: 1 / -1 !important; }

  /* Widget del chat por encima de la bottom nav */
  #chat-widget{ bottom: calc(92px + env(safe-area-inset-bottom)); }
}

/* 4) Imágenes/canvas nunca más anchos que el viewport */
img, canvas, svg, video { max-width: 100%; height: auto; }

/* 5) Nada con width:100vw en mobile (evita "empujar" el ancho por la barra de scroll) */
@media (max-width: 900px){
  [style*="100vw"]{ width: 100% !important; max-width: 100% !important; }
}

/* ========= LIGHT MODE OVERRIDES FOR PRO SKIN ========= */
/* Override pro skin colors when in light mode */

body[data-skin="pro"].lightmode,
body[data-skin="pro"][data-theme="light"],
body[data-skin="pro"]:root:not(.darkmode) {
  --pro-bg:        var(--blanco-hueso, #FAFAFA);
  --pro-surface:   #ffffff;
  --pro-elev:      #f8f9fa;
  --pro-border:    #e2e8f0;
  --pro-text:      #2d3748;
  --pro-text-2:    #718096;

  --pro-primary:   var(--lavanda, #C8B6FF);
  --pro-primary-2: #B5A3FF;

  --pro-success:   #22C55E;
  --pro-warning:   #F59E0B;
  --pro-error:     #EF4444;

  --pro-shadow-sm: 0 1px 3px rgba(0,0,0,.1);
  --pro-shadow-md: 0 4px 6px rgba(0,0,0,.1);

  --text-muted: rgba(45,55,72,.72);
}

/* Light mode header and containers */
body[data-skin="pro"].lightmode .header,
body[data-skin="pro"][data-theme="light"] .header {
  background: var(--pro-surface);
  box-shadow: var(--pro-shadow-sm);
  color: var(--pro-text);
}

body[data-skin="pro"].lightmode .main-dashboard,
body[data-skin="pro"].lightmode .dashboard-section.active,
body[data-skin="pro"][data-theme="light"] .main-dashboard,
body[data-skin="pro"][data-theme="light"] .dashboard-section.active {
  background: transparent;
  color: var(--pro-text);
}

/* Light mode sidebar */
body[data-skin="pro"].lightmode .sidebar-nav,
body[data-skin="pro"][data-theme="light"] .sidebar-nav {
  background: var(--pro-surface);
  border-right: 1px solid var(--pro-border);
}

body[data-skin="pro"].lightmode .nav-item.active,
body[data-skin="pro"][data-theme="light"] .nav-item.active {
  background: var(--pro-elev);
  border: 1px solid var(--pro-border);
  box-shadow: var(--pro-shadow-sm);
  color: var(--pro-text);
}

/* Light mode cards */
body[data-skin="pro"].lightmode .summary-card,
body[data-skin="pro"].lightmode .chart-card-new,
body[data-skin="pro"].lightmode .expenses-section-card,
body[data-skin="pro"].lightmode .income-section-card,
body[data-skin="pro"].lightmode .spending-limits-main-card,
body[data-skin="pro"].lightmode .settings-card,
body[data-skin="pro"].lightmode .report-card,
body[data-skin="pro"].lightmode .budgets-container,
body[data-skin="pro"][data-theme="light"] .summary-card,
body[data-skin="pro"][data-theme="light"] .chart-card-new,
body[data-skin="pro"][data-theme="light"] .expenses-section-card,
body[data-skin="pro"][data-theme="light"] .income-section-card,
body[data-skin="pro"][data-theme="light"] .spending-limits-main-card,
body[data-skin="pro"][data-theme="light"] .settings-card,
body[data-skin="pro"][data-theme="light"] .report-card,
body[data-skin="pro"][data-theme="light"] .budgets-container {
  background: var(--pro-surface);
  border: 1px solid var(--pro-border);
  box-shadow: var(--pro-shadow-sm);
  color: var(--pro-text);
}

/* Light mode typography */
body[data-skin="pro"].lightmode .section-header h1,
body[data-skin="pro"][data-theme="light"] .section-header h1 { 
  color: var(--pro-text); 
}

body[data-skin="pro"].lightmode .card-amount,
body[data-skin="pro"][data-theme="light"] .card-amount {
  color: var(--pro-text);
}

body[data-skin="pro"].lightmode .card-title,
body[data-skin="pro"].lightmode .nav-label,
body[data-skin="pro"][data-theme="light"] .card-title,
body[data-skin="pro"][data-theme="light"] .nav-label {
  color: var(--pro-text-2);
}

/* Light mode buttons */
body[data-skin="pro"].lightmode .btn-primary,
body[data-skin="pro"][data-theme="light"] .btn-primary {
  background: linear-gradient(135deg, var(--pro-primary), var(--pro-primary-2));
  color: #ffffff;
  box-shadow: 0 4px 12px rgba(200,182,255,.2);
}

body[data-skin="pro"].lightmode .btn-secondary,
body[data-skin="pro"][data-theme="light"] .btn-secondary {
  background: var(--pro-elev);
  color: var(--pro-text);
  border: 1px solid var(--pro-border);
}

/* Light mode hover effects */
body[data-skin="pro"].lightmode .summary-card:hover,
body[data-skin="pro"][data-theme="light"] .summary-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 16px rgba(0,0,0,.12);
}

/* Light mode focus styles */
body[data-skin="pro"].lightmode a:focus-visible,
body[data-skin="pro"].lightmode button:focus-visible,
body[data-skin="pro"].lightmode .nav-item:focus-visible,
body[data-skin="pro"].lightmode .btn:focus-visible,
body[data-skin="pro"][data-theme="light"] a:focus-visible,
body[data-skin="pro"][data-theme="light"] button:focus-visible,
body[data-skin="pro"][data-theme="light"] .nav-item:focus-visible,
body[data-skin="pro"][data-theme="light"] .btn:focus-visible {
  outline: 3px solid rgba(200,182,255,.4);
  outline-offset: 2px;
  border-radius: 10px;
}

body[data-skin="pro"].lightmode .summary-card .card-header-simple,
body[data-skin="pro"][data-theme="light"] .summary-card .card-header-simple { 
  border-bottom: 1px solid var(--pro-border);
}
